# Vehicle Detector

VGG16 implementation to detect cars that pass through a designated area

# Step-by-step installation

Make sure pip is installed
    
    $ sudo apt install python3-pip

### Clone the repo or download it as a .zip file, and then unzip it
    $ git clone https://github.com/ArthurYdalgo/cve-cnn-car-detector

### Once inside the repo folder
    $ sudo chmod +x setup.sh
    $ ./setup.sh

### Execute
    $ ./main.py

Alternatively, the EntityDetector can be used as desired by importing the entityDetector, declaring a EntityDetector and running the 'detect()' method

    $ import entityDetector as ed
    $ entity_detector = ed.EntityDetector()
    $ entity_detector.detect()


# Changing parameters
## Footage source
The source is, as default, the 'road footage.mp4' file. In case a different source is desired, add a 'footage_source' paramenter in the EntityDetector declaration in 'main.py'

    $ entity_detector = ed.EntityDetector(footage_source='another footage.mp4')

or send an integer if the source is a connected device. To use your webcam, use 0 as paramenter

    $ entity_detector = ed.EntityDetector(footage_source=0)

## Targets
In case other set of targets is desired, such as cars, boats, motorbikes and trucks, add a 'look_for' parameter in the EntityDetector declaration in 'main.py'. This will be the new list of targets, overwriting the default ones. The complete list of available targets in the classes.txt file.

    $ entity_detector = ed.EntityDetector(look_for=['school_bus','minivan'])

## Threshold
The 'confidence_threshold', which is by default 0.1 (10 %) can be overwritten by simply add the desired parameters in the EntityDetector declaration in 'main.py'.

    $ entity_detector = ed.EntityDetector(confidence_threshold=0.7)

## Search area
The middle lane (from the footage camera's perspective, starting from the left) is the default search area. In case a new area is desired, add a 'search_area' parameter in the EntityDetector declaration in 'main.py', which is a dictionary containing the x and y center of the search area, and it's dimensions (width and height)

    $ x, y, width, height = 715, 475, 150, 35
    $ desired_area = {'position': (x, y), 'dimension': (width, height)}
    $ entity_detector = ed.EntityDetector(search_area = desired_area)

## Displaying footage and console output
By default, the footage source is displayed and the output (if there's any) is printed in the console (the result is also displayed in the footage). In case any of them is not desired, simply add the parameters when the 'detect()' method is called. Be aware that in case the console output is keept enabled, an output will be printed for every frame that contains a valid detection

    $ entity_detector.detect(display = False, console_output = False)